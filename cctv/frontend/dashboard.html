<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CCTV {{ cctv.id }} ÎåÄÏãúÎ≥¥Îìú</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Ìó§Îçî -->
        <header class="dashboard-header">
            <div class="header-left">
                <h1><i class="fas fa-video"></i> {{ cctv.name }}</h1>
                <span class="location">{{ "%.4f"|format(cctv.lat) }}, {{ "%.4f"|format(cctv.lon) }}</span>
            </div>
            <div class="header-right">
                <span class="status-badge inactive" id="status-badge">ÎπÑÌôúÏÑ±</span>
                <button id="start-monitoring" class="btn btn-primary">
                    <i class="fas fa-play"></i> ÏãúÏûë
                </button>
                <button id="stop-monitoring" class="btn btn-danger" style="display: none;">
                    <i class="fas fa-stop"></i> Ï§ëÏßÄ
                </button>
            </div>
        </header>

        <!-- Î©îÏù∏ ÏΩòÌÖêÏ∏† -->
        <main class="dashboard-main">
            <!-- ÎπÑÎîîÏò§ ÏòÅÏó≠ -->
            <div class="video-section">
                <div class="video-container">
                    <img id="dashboard-video" alt="CCTV ÏòÅÏÉÅ" style="display: none;">
                    <div class="video-placeholder">
                        <i class="fas fa-video-slash"></i>
                        <p>Î™®ÎãàÌÑ∞ÎßÅÏùÑ ÏãúÏûëÌïòÏÑ∏Ïöî</p>
                    </div>
                </div>
                
                <!-- Ïã§ÏãúÍ∞Ñ Ï†ïÎ≥¥ -->
                <div class="info-cards">
                    <div class="info-card">
                        <div class="card-icon">üöó</div>
                        <div class="card-content">
                            <div class="card-value" id="current-vehicles">0</div>
                            <div class="card-label">ÌòÑÏû¨ Ï∞®Îüâ</div>
                        </div>
                    </div>
                    <div class="info-card">
                        <div class="card-icon">‚ö°</div>
                        <div class="card-content">
                            <div class="card-value">
                                <span id="avg-speed">0</span>
                                <span class="unit">km/h</span>
                            </div>
                            <div class="card-label">ÌèâÍ∑† ÏÜçÎèÑ</div>
                        </div>
                    </div>
                    <div class="info-card">
                        <div class="card-icon">üö¶</div>
                        <div class="card-content">
                            <div class="card-value">
                                <span class="traffic-level-badge smooth" id="traffic-level">ÏõêÌôú</span>
                            </div>
                            <div class="card-label">ÍµêÌÜµ ÏÉÅÌô©</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Îç∞Ïù¥ÌÑ∞ Ìå®ÎÑê -->
            <div class="data-section">
                <!-- Ï∞®Îüâ Ïú†ÎèôÎüâ -->
                <div class="section-card">
                    <h3><i class="fas fa-chart-line"></i> Ï∞®Îüâ Ïú†ÎèôÎüâ</h3>
                    <div class="flow-summary">
                        <span class="flow-stat">
                            <span class="flow-label">ÏßÑÏûÖ</span>
                            <span class="flow-value" id="total-in">0</span>
                        </span>
                        <span class="flow-stat">
                            <span class="flow-label">ÏßÑÏ∂ú</span>
                            <span class="flow-value" id="total-out">0</span>
                        </span>
                    </div>
                    <div class="flow-table-container">
                        <table class="flow-table">
                            <thead>
                                <tr>
                                    <th>ÏãúÍ∞Ñ</th>
                                    <th>ÏßÑÏûÖ</th>
                                    <th>ÏßÑÏ∂ú</th>
                                </tr>
                            </thead>
                            <tbody id="flow-table-body">
                                <!-- ÎèôÏ†Å ÏÉùÏÑ± -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ÏãúÏä§ÌÖú ÏÉÅÌÉú -->
                <div class="section-card">
                    <h3><i class="fas fa-server"></i> ÏãúÏä§ÌÖú ÏÉÅÌÉú</h3>
                    <div class="status-list">
                        <div class="status-item">
                            <div class="status-indicator active" id="camera-indicator"></div>
                            <span>Ïπ¥Î©îÎùº</span>
                            <span class="status-value" id="camera-status">ÎåÄÍ∏∞</span>
                        </div>
                        <div class="status-item">
                            <div class="status-indicator active" id="ai-indicator"></div>
                            <span>AI Î™®Îç∏</span>
                            <span class="status-value" id="ai-status">Î°úÎìúÎê®</span>
                        </div>
                        <div class="status-item">
                            <div class="status-indicator active" id="network-indicator"></div>
                            <span>ÎÑ§Ìä∏ÏõåÌÅ¨</span>
                            <span class="status-value" id="network-status">Ïó∞Í≤∞Îê®</span>
                        </div>
                    </div>
                </div>

                <!-- Ï†úÏñ¥ Ìå®ÎÑê -->
                <div class="section-card">
                    <h3><i class="fas fa-cogs"></i> Ï†úÏñ¥</h3>
                    <div class="control-options">
                        <div class="control-group">
                            <label>Í∞êÏßÄ ÎØºÍ∞êÎèÑ: <span id="sensitivity-value">0.5</span></label>
                            <input type="range" id="sensitivity-slider" min="0.3" max="0.9" step="0.1" value="0.5">
                        </div>
                        <div class="control-buttons">
                            <button id="reset-data" class="btn btn-warning">
                                <i class="fas fa-undo"></i> Î¶¨ÏÖã
                            </button>
                            <button id="export-data" class="btn btn-info">
                                <i class="fas fa-download"></i> ÎÇ¥Î≥¥ÎÇ¥Í∏∞
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        window.cctvInfo = {  
            id: {{ cctv.id }},
            name: "{{ cctv.name }}",
            lat: {{ cctv.lat }},         
            lon: {{ cctv.lon }}
        };
    </script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>
